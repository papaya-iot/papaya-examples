<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">@import url(https://themes.googleusercontent.com/fonts/css?kit=OPeqXG-QxW3ZD8BtmPikfA);.lst-kix_tnr4m46lq3qn-8>li{counter-increment:lst-ctn-kix_tnr4m46lq3qn-8}ol.lst-kix_tnr4m46lq3qn-8.start{counter-reset:lst-ctn-kix_tnr4m46lq3qn-8 0}ol.lst-kix_1vq4pqm4j4lf-3.start{counter-reset:lst-ctn-kix_1vq4pqm4j4lf-3 0}ol.lst-kix_sze8hhmiomp3-1.start{counter-reset:lst-ctn-kix_sze8hhmiomp3-1 0}ol.lst-kix_1vq4pqm4j4lf-0{list-style-type:none}ol.lst-kix_1vq4pqm4j4lf-2{list-style-type:none}ol.lst-kix_1vq4pqm4j4lf-1{list-style-type:none}ol.lst-kix_1vq4pqm4j4lf-4{list-style-type:none}ol.lst-kix_1vq4pqm4j4lf-0.start{counter-reset:lst-ctn-kix_1vq4pqm4j4lf-0 0}ol.lst-kix_1vq4pqm4j4lf-3{list-style-type:none}ol.lst-kix_tnr4m46lq3qn-5.start{counter-reset:lst-ctn-kix_tnr4m46lq3qn-5 0}ol.lst-kix_1vq4pqm4j4lf-6{list-style-type:none}.lst-kix_sze8hhmiomp3-3>li{counter-increment:lst-ctn-kix_sze8hhmiomp3-3}ol.lst-kix_1vq4pqm4j4lf-5{list-style-type:none}ol.lst-kix_1vq4pqm4j4lf-8{list-style-type:none}ol.lst-kix_1vq4pqm4j4lf-7{list-style-type:none}.lst-kix_sze8hhmiomp3-2>li{counter-increment:lst-ctn-kix_sze8hhmiomp3-2}.lst-kix_tnr4m46lq3qn-0>li:before{content:"" counter(lst-ctn-kix_tnr4m46lq3qn-0,upper-latin) ". "}.lst-kix_rsylu4jixpt0-0>li{counter-increment:lst-ctn-kix_rsylu4jixpt0-0}.lst-kix_tnr4m46lq3qn-1>li:before{content:"" counter(lst-ctn-kix_tnr4m46lq3qn-1,lower-latin) ". "}ol.lst-kix_tnr4m46lq3qn-7{list-style-type:none}ol.lst-kix_tnr4m46lq3qn-8{list-style-type:none}ol.lst-kix_tnr4m46lq3qn-5{list-style-type:none}ol.lst-kix_tnr4m46lq3qn-6{list-style-type:none}ol.lst-kix_tnr4m46lq3qn-3{list-style-type:none}ol.lst-kix_tnr4m46lq3qn-4{list-style-type:none}ol.lst-kix_tnr4m46lq3qn-1{list-style-type:none}ol.lst-kix_tnr4m46lq3qn-2{list-style-type:none}ol.lst-kix_tnr4m46lq3qn-0{list-style-type:none}.lst-kix_tnr4m46lq3qn-7>li:before{content:"" counter(lst-ctn-kix_tnr4m46lq3qn-7,lower-latin) ". "}.lst-kix_tnr4m46lq3qn-6>li:before{content:"" counter(lst-ctn-kix_tnr4m46lq3qn-6,decimal) ". "}.lst-kix_tnr4m46lq3qn-5>li:before{content:"" counter(lst-ctn-kix_tnr4m46lq3qn-5,lower-roman) ". "}ol.lst-kix_sze8hhmiomp3-4.start{counter-reset:lst-ctn-kix_sze8hhmiomp3-4 0}ol.lst-kix_rsylu4jixpt0-1{list-style-type:none}ol.lst-kix_rsylu4jixpt0-1.start{counter-reset:lst-ctn-kix_rsylu4jixpt0-1 0}.lst-kix_tnr4m46lq3qn-3>li:before{content:"" counter(lst-ctn-kix_tnr4m46lq3qn-3,decimal) ". "}ol.lst-kix_rsylu4jixpt0-2{list-style-type:none}ol.lst-kix_sze8hhmiomp3-7.start{counter-reset:lst-ctn-kix_sze8hhmiomp3-7 0}ol.lst-kix_rsylu4jixpt0-3{list-style-type:none}.lst-kix_tnr4m46lq3qn-2>li:before{content:"" counter(lst-ctn-kix_tnr4m46lq3qn-2,lower-roman) ". "}.lst-kix_tnr4m46lq3qn-4>li:before{content:"" counter(lst-ctn-kix_tnr4m46lq3qn-4,lower-latin) ". "}ol.lst-kix_rsylu4jixpt0-4{list-style-type:none}ol.lst-kix_rsylu4jixpt0-5{list-style-type:none}.lst-kix_rsylu4jixpt0-8>li{counter-increment:lst-ctn-kix_rsylu4jixpt0-8}ol.lst-kix_rsylu4jixpt0-6{list-style-type:none}.lst-kix_tnr4m46lq3qn-7>li{counter-increment:lst-ctn-kix_tnr4m46lq3qn-7}ol.lst-kix_rsylu4jixpt0-7{list-style-type:none}ol.lst-kix_rsylu4jixpt0-8{list-style-type:none}ol.lst-kix_tnr4m46lq3qn-3.start{counter-reset:lst-ctn-kix_tnr4m46lq3qn-3 0}.lst-kix_1vq4pqm4j4lf-2>li{counter-increment:lst-ctn-kix_1vq4pqm4j4lf-2}ol.lst-kix_1vq4pqm4j4lf-5.start{counter-reset:lst-ctn-kix_1vq4pqm4j4lf-5 0}.lst-kix_rsylu4jixpt0-2>li{counter-increment:lst-ctn-kix_rsylu4jixpt0-2}ol.lst-kix_rsylu4jixpt0-7.start{counter-reset:lst-ctn-kix_rsylu4jixpt0-7 0}.lst-kix_sze8hhmiomp3-5>li{counter-increment:lst-ctn-kix_sze8hhmiomp3-5}.lst-kix_sze8hhmiomp3-0>li{counter-increment:lst-ctn-kix_sze8hhmiomp3-0}.lst-kix_1vq4pqm4j4lf-7>li{counter-increment:lst-ctn-kix_1vq4pqm4j4lf-7}.lst-kix_tnr4m46lq3qn-8>li:before{content:"" counter(lst-ctn-kix_tnr4m46lq3qn-8,lower-roman) ". "}.lst-kix_1vq4pqm4j4lf-1>li{counter-increment:lst-ctn-kix_1vq4pqm4j4lf-1}ol.lst-kix_rsylu4jixpt0-0.start{counter-reset:lst-ctn-kix_rsylu4jixpt0-0 0}.lst-kix_sze8hhmiomp3-6>li{counter-increment:lst-ctn-kix_sze8hhmiomp3-6}.lst-kix_1vq4pqm4j4lf-8>li{counter-increment:lst-ctn-kix_1vq4pqm4j4lf-8}.lst-kix_rsylu4jixpt0-3>li{counter-increment:lst-ctn-kix_rsylu4jixpt0-3}ol.lst-kix_sze8hhmiomp3-3.start{counter-reset:lst-ctn-kix_sze8hhmiomp3-3 0}.lst-kix_rsylu4jixpt0-6>li{counter-increment:lst-ctn-kix_rsylu4jixpt0-6}ol.lst-kix_tnr4m46lq3qn-2.start{counter-reset:lst-ctn-kix_tnr4m46lq3qn-2 0}.lst-kix_rsylu4jixpt0-8>li:before{content:"" counter(lst-ctn-kix_rsylu4jixpt0-8,lower-roman) ". "}.lst-kix_rsylu4jixpt0-7>li:before{content:"" counter(lst-ctn-kix_rsylu4jixpt0-7,lower-latin) ". "}.lst-kix_tnr4m46lq3qn-6>li{counter-increment:lst-ctn-kix_tnr4m46lq3qn-6}.lst-kix_rsylu4jixpt0-4>li:before{content:"" counter(lst-ctn-kix_rsylu4jixpt0-4,lower-latin) ". "}.lst-kix_rsylu4jixpt0-6>li:before{content:"" counter(lst-ctn-kix_rsylu4jixpt0-6,decimal) ". "}.lst-kix_tnr4m46lq3qn-3>li{counter-increment:lst-ctn-kix_tnr4m46lq3qn-3}.lst-kix_rsylu4jixpt0-5>li:before{content:"" counter(lst-ctn-kix_rsylu4jixpt0-5,lower-roman) ". "}ol.lst-kix_1vq4pqm4j4lf-6.start{counter-reset:lst-ctn-kix_1vq4pqm4j4lf-6 0}.lst-kix_rsylu4jixpt0-0>li:before{content:"" counter(lst-ctn-kix_rsylu4jixpt0-0,upper-latin) ". "}ol.lst-kix_rsylu4jixpt0-6.start{counter-reset:lst-ctn-kix_rsylu4jixpt0-6 0}.lst-kix_rsylu4jixpt0-2>li:before{content:"" counter(lst-ctn-kix_rsylu4jixpt0-2,lower-roman) ". "}.lst-kix_tnr4m46lq3qn-0>li{counter-increment:lst-ctn-kix_tnr4m46lq3qn-0}ol.lst-kix_sze8hhmiomp3-2.start{counter-reset:lst-ctn-kix_sze8hhmiomp3-2 0}.lst-kix_rsylu4jixpt0-3>li:before{content:"" counter(lst-ctn-kix_rsylu4jixpt0-3,decimal) ". "}.lst-kix_rsylu4jixpt0-1>li:before{content:"" counter(lst-ctn-kix_rsylu4jixpt0-1,lower-latin) ". "}.lst-kix_tnr4m46lq3qn-2>li{counter-increment:lst-ctn-kix_tnr4m46lq3qn-2}ol.lst-kix_rsylu4jixpt0-2.start{counter-reset:lst-ctn-kix_rsylu4jixpt0-2 0}.lst-kix_1vq4pqm4j4lf-5>li{counter-increment:lst-ctn-kix_1vq4pqm4j4lf-5}.lst-kix_rsylu4jixpt0-4>li{counter-increment:lst-ctn-kix_rsylu4jixpt0-4}.lst-kix_sze8hhmiomp3-8>li{counter-increment:lst-ctn-kix_sze8hhmiomp3-8}ol.lst-kix_sze8hhmiomp3-8.start{counter-reset:lst-ctn-kix_sze8hhmiomp3-8 0}ol.lst-kix_1vq4pqm4j4lf-7.start{counter-reset:lst-ctn-kix_1vq4pqm4j4lf-7 0}.lst-kix_1vq4pqm4j4lf-4>li{counter-increment:lst-ctn-kix_1vq4pqm4j4lf-4}ol.lst-kix_rsylu4jixpt0-5.start{counter-reset:lst-ctn-kix_rsylu4jixpt0-5 0}ol.lst-kix_sze8hhmiomp3-0.start{counter-reset:lst-ctn-kix_sze8hhmiomp3-0 0}.lst-kix_tnr4m46lq3qn-1>li{counter-increment:lst-ctn-kix_tnr4m46lq3qn-1}ol.lst-kix_tnr4m46lq3qn-7.start{counter-reset:lst-ctn-kix_tnr4m46lq3qn-7 0}ol.lst-kix_rsylu4jixpt0-8.start{counter-reset:lst-ctn-kix_rsylu4jixpt0-8 0}ol.lst-kix_1vq4pqm4j4lf-4.start{counter-reset:lst-ctn-kix_1vq4pqm4j4lf-4 0}.lst-kix_sze8hhmiomp3-0>li:before{content:"" counter(lst-ctn-kix_sze8hhmiomp3-0,decimal) ". "}.lst-kix_sze8hhmiomp3-1>li:before{content:"" counter(lst-ctn-kix_sze8hhmiomp3-1,lower-latin) ". "}.lst-kix_sze8hhmiomp3-2>li:before{content:"" counter(lst-ctn-kix_sze8hhmiomp3-2,lower-roman) ". "}.lst-kix_tnr4m46lq3qn-4>li{counter-increment:lst-ctn-kix_tnr4m46lq3qn-4}ol.lst-kix_1vq4pqm4j4lf-1.start{counter-reset:lst-ctn-kix_1vq4pqm4j4lf-1 0}.lst-kix_rsylu4jixpt0-5>li{counter-increment:lst-ctn-kix_rsylu4jixpt0-5}ol.lst-kix_tnr4m46lq3qn-1.start{counter-reset:lst-ctn-kix_tnr4m46lq3qn-1 0}ol.lst-kix_tnr4m46lq3qn-4.start{counter-reset:lst-ctn-kix_tnr4m46lq3qn-4 0}.lst-kix_sze8hhmiomp3-8>li:before{content:"" counter(lst-ctn-kix_sze8hhmiomp3-8,lower-roman) ". "}.lst-kix_tnr4m46lq3qn-5>li{counter-increment:lst-ctn-kix_tnr4m46lq3qn-5}.lst-kix_sze8hhmiomp3-7>li:before{content:"" counter(lst-ctn-kix_sze8hhmiomp3-7,lower-latin) ". "}.lst-kix_sze8hhmiomp3-6>li:before{content:"" counter(lst-ctn-kix_sze8hhmiomp3-6,decimal) ". "}ol.lst-kix_sze8hhmiomp3-6.start{counter-reset:lst-ctn-kix_sze8hhmiomp3-6 0}ol.lst-kix_rsylu4jixpt0-0{list-style-type:none}.lst-kix_sze8hhmiomp3-4>li:before{content:"" counter(lst-ctn-kix_sze8hhmiomp3-4,lower-latin) ". "}ol.lst-kix_rsylu4jixpt0-4.start{counter-reset:lst-ctn-kix_rsylu4jixpt0-4 0}.lst-kix_sze8hhmiomp3-3>li:before{content:"" counter(lst-ctn-kix_sze8hhmiomp3-3,decimal) ". "}.lst-kix_sze8hhmiomp3-5>li:before{content:"" counter(lst-ctn-kix_sze8hhmiomp3-5,lower-roman) ". "}ol.lst-kix_1vq4pqm4j4lf-8.start{counter-reset:lst-ctn-kix_1vq4pqm4j4lf-8 0}.lst-kix_rsylu4jixpt0-7>li{counter-increment:lst-ctn-kix_rsylu4jixpt0-7}ol.lst-kix_tnr4m46lq3qn-0.start{counter-reset:lst-ctn-kix_tnr4m46lq3qn-0 0}ol.lst-kix_1vq4pqm4j4lf-2.start{counter-reset:lst-ctn-kix_1vq4pqm4j4lf-2 0}.lst-kix_1vq4pqm4j4lf-0>li:before{content:"" counter(lst-ctn-kix_1vq4pqm4j4lf-0,decimal) ". "}.lst-kix_1vq4pqm4j4lf-6>li{counter-increment:lst-ctn-kix_1vq4pqm4j4lf-6}.lst-kix_sze8hhmiomp3-1>li{counter-increment:lst-ctn-kix_sze8hhmiomp3-1}.lst-kix_1vq4pqm4j4lf-0>li{counter-increment:lst-ctn-kix_1vq4pqm4j4lf-0}ol.lst-kix_sze8hhmiomp3-8{list-style-type:none}ol.lst-kix_sze8hhmiomp3-5{list-style-type:none}.lst-kix_1vq4pqm4j4lf-3>li:before{content:"" counter(lst-ctn-kix_1vq4pqm4j4lf-3,decimal) ". "}ol.lst-kix_sze8hhmiomp3-4{list-style-type:none}ol.lst-kix_sze8hhmiomp3-7{list-style-type:none}.lst-kix_1vq4pqm4j4lf-2>li:before{content:"" counter(lst-ctn-kix_1vq4pqm4j4lf-2,lower-roman) ". "}ol.lst-kix_sze8hhmiomp3-6{list-style-type:none}ol.lst-kix_sze8hhmiomp3-1{list-style-type:none}.lst-kix_1vq4pqm4j4lf-1>li:before{content:"" counter(lst-ctn-kix_1vq4pqm4j4lf-1,lower-latin) ". "}ol.lst-kix_sze8hhmiomp3-0{list-style-type:none}ol.lst-kix_rsylu4jixpt0-3.start{counter-reset:lst-ctn-kix_rsylu4jixpt0-3 0}ol.lst-kix_sze8hhmiomp3-3{list-style-type:none}ol.lst-kix_sze8hhmiomp3-2{list-style-type:none}ol.lst-kix_sze8hhmiomp3-5.start{counter-reset:lst-ctn-kix_sze8hhmiomp3-5 0}.lst-kix_1vq4pqm4j4lf-7>li:before{content:"" counter(lst-ctn-kix_1vq4pqm4j4lf-7,lower-latin) ". "}.lst-kix_1vq4pqm4j4lf-6>li:before{content:"" counter(lst-ctn-kix_1vq4pqm4j4lf-6,decimal) ". "}.lst-kix_1vq4pqm4j4lf-8>li:before{content:"" counter(lst-ctn-kix_1vq4pqm4j4lf-8,lower-roman) ". "}ol.lst-kix_tnr4m46lq3qn-6.start{counter-reset:lst-ctn-kix_tnr4m46lq3qn-6 0}.lst-kix_rsylu4jixpt0-1>li{counter-increment:lst-ctn-kix_rsylu4jixpt0-1}.lst-kix_1vq4pqm4j4lf-4>li:before{content:"" counter(lst-ctn-kix_1vq4pqm4j4lf-4,lower-latin) ". "}.lst-kix_sze8hhmiomp3-7>li{counter-increment:lst-ctn-kix_sze8hhmiomp3-7}.lst-kix_1vq4pqm4j4lf-5>li:before{content:"" counter(lst-ctn-kix_1vq4pqm4j4lf-5,lower-roman) ". "}.lst-kix_1vq4pqm4j4lf-3>li{counter-increment:lst-ctn-kix_1vq4pqm4j4lf-3}.lst-kix_sze8hhmiomp3-4>li{counter-increment:lst-ctn-kix_sze8hhmiomp3-4}ol{margin:0;padding:0}table td,table th{padding:0}.c37{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:139.5pt;border-top-color:#000000;border-bottom-style:solid}.c17{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:328.5pt;border-top-color:#000000;border-bottom-style:solid}.c41{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:136.5pt;border-top-color:#000000;border-bottom-style:solid}.c11{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:52pt;border-top-color:#000000;border-bottom-style:solid}.c27{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:93.6pt;border-top-color:#000000;border-bottom-style:solid}.c24{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:331.5pt;border-top-color:#000000;border-bottom-style:solid}.c14{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:107.2pt;border-top-color:#000000;border-bottom-style:solid}.c13{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:172.5pt;border-top-color:#000000;border-bottom-style:solid}.c28{margin-left:36pt;padding-top:18pt;padding-left:0pt;padding-bottom:6pt;line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.c29{padding-top:20pt;padding-bottom:6pt;line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.c19{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:16pt;font-family:"Arial";font-style:normal}.c44{padding-top:10pt;padding-bottom:6pt;line-height:0.9;page-break-after:avoid;orphans:2;widows:2;text-align:left}.c4{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:normal}.c36{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:9pt;font-family:"Arial";font-style:normal}.c6{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:8pt;font-family:"Arial";font-style:normal}.c30{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:20pt;font-family:"Arial";font-style:normal}.c23{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:7pt;font-family:"Arial";font-style:normal}.c35{margin-left:18pt;padding-top:3pt;padding-bottom:0pt;line-height:1.0;orphans:2;widows:2;text-align:left}.c12{color:#000000;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:normal}.c48{padding-top:0pt;padding-bottom:3pt;line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.c18{margin-left:18pt;padding-top:3pt;padding-bottom:4pt;line-height:1.0;orphans:2;widows:2;text-align:left}.c3{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left;height:11pt}.c31{padding-top:18pt;padding-bottom:6pt;line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.c0{margin-left:36pt;padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c2{padding-top:4pt;padding-bottom:0pt;line-height:1.0;orphans:2;widows:2;text-align:left}.c49{color:#000000;text-decoration:none;vertical-align:baseline;font-size:26pt;font-family:"Arial";font-style:normal}.c25{padding-top:10pt;padding-bottom:0pt;line-height:0.9;orphans:2;widows:2;text-align:center}.c26{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:center}.c7{padding-top:10pt;padding-bottom:0pt;line-height:0.9;orphans:2;widows:2;text-align:left}.c5{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c45{color:#000000;text-decoration:none;vertical-align:baseline;font-size:9pt;font-family:"Arial";font-style:normal}.c1{padding-top:10pt;padding-bottom:0pt;line-height:1.0;orphans:2;widows:2;text-align:left}.c21{font-weight:400;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:normal}.c8{text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline}.c32{border-spacing:0;border-collapse:collapse;margin-right:auto}.c22{padding-top:0pt;padding-bottom:0pt;line-height:1.0;text-align:left}.c42{background-color:#ffffff;font-weight:400;font-size:11.5pt;font-family:"Roboto"}.c16{padding-top:0pt;padding-bottom:0pt;line-height:1.0;text-align:center}.c34{margin-left:auto;border-spacing:0;border-collapse:collapse;margin-right:auto}.c46{text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;text-decoration:line-through}.c47{background-color:#ffffff;max-width:468pt;padding:72pt 72pt 72pt 72pt}.c10{color:inherit;text-decoration:inherit}.c40{padding:0;margin:0}.c33{margin-left:36pt}.c38{font-weight:700}.c15{height:11pt}.c9{height:0pt}.c43{padding-left:0pt}.c39{vertical-align:super}.c20{margin-left:4.5pt}.title{padding-top:0pt;color:#000000;font-weight:700;font-size:26pt;padding-bottom:3pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#666666;font-size:15pt;padding-bottom:16pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:20pt;color:#000000;font-size:20pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-size:16pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:16pt;color:#434343;font-size:14pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style></head><body class="c47"><p class="c48 title" id="h.p8b3soczzu73"><span>Papaya GPIB - User Guide</span></p><p class="c2"><span class="c21 c8"><a class="c10" href="#h.8uk1503ajltf">Introduction</a></span></p><p class="c1"><span class="c21 c8"><a class="c10" href="#h.5d5o0qts4dcd">Getting Started</a></span></p><p class="c1"><span class="c21 c8"><a class="c10" href="#h.bkp6t6cqb3lt">Wireless Setup</a></span></p><p class="c1"><span class="c21 c8"><a class="c10" href="#h.tmogmryyqmyz">Papaya GPIB Controller Interface</a></span></p><p class="c1"><span class="c21 c8"><a class="c10" href="#h.3esraggbbslk">Papaya Controller using NI MAX GUI</a></span></p><p class="c1"><span class="c21 c8"><a class="c10" href="#h.yn5rbhpg5k1o">Papaya Controller UART or RS232 Interface</a></span></p><p class="c35"><span class="c8"><a class="c10" href="#h.44jgokw27oir">ASCII Character Write.</a></span></p><p class="c35"><span class="c8"><a class="c10" href="#h.pqvthk2ncn9i">Raw Byte Write-Query Mode</a></span></p><p class="c1"><span class="c21 c8"><a class="c10" href="#h.os8eq2r9rz5b">Papaya GPIB I2C Interface</a></span></p><p class="c1"><span class="c21 c8"><a class="c10" href="#h.d37f7mgay256">Programming the Papaya Controller</a></span></p><p class="c35"><span class="c21 c8"><a class="c10" href="#h.35333t83hlo8">C# API Programming Setup</a></span></p><p class="c35"><span class="c21 c8"><a class="c10" href="#h.jk5qrd8oevra">C# and Python API</a></span></p><p class="c35"><span class="c21 c8"><a class="c10" href="#h.k97r47tchzc9">GPIB API</a></span></p><p class="c35"><span class="c8"><a class="c10" href="#h.l4i5gbinsp7b">IEEE 488.2 Data Format</a></span></p><p class="c35"><span class="c21 c8"><a class="c10" href="#h.v0q5c7dwy4fh">UART/RS232 API</a></span></p><p class="c18"><span class="c21 c8"><a class="c10" href="#h.tu5gtxamkuok">I2C API</a></span></p><h1 class="c29" id="h.8uk1503ajltf"><span class="c30">Introduction</span></h1><p class="c5"><span class="c4">The Papaya GPIB Controller is a cost effective WiFi and Ethernet GPIB controller powered by Raspberry Pi 4. It is based on VXI-11 instrument control, fully compatible with Virtual Instrument Software Architecture (VISA), and suitable for production test automation and R&amp;D test environments. </span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span>The Papaya GPIB controller is a highly capable &ldquo;all-in-one&rdquo; controller, supporting GPIB, RS232 and I</span><span class="c39">2</span><span>C interfaces used in typical instrument control encountered in both production and R&amp;D test environments. The PC hosts where the automation software resides can connect to a Papaya GPIB controller using either Gigabit ethernet, WiFi or Bluethooth</span><span class="c39">&reg;</span><span class="c4">. This allows unprecedented flexibility in test automation, leading to a solution that is both low cost and scalable. </span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="c4">The Papaya GPIB controller is slightly larger than a credit card and is designed to be plugged directly into the back of a GPIB instrument. Below is the top view of the controller with all the various interfaces labelled except for the WiFi interface. The wireless LAN used is 2.4GHz and 5.0GHz 80.211b/g/n/ac. A USB-C power supply greater than 1.5A can be used to power the device.</span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 352.00px;"><img alt="" src="images/image25.png" style="width: 624.00px; height: 352.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span>The Papaya GPIB Controller </span><span>has a webserver </span><span>running for the device configurations and manual interactions with the connected devices. Any web browser can be used but we recommend Firefox </span><span>as it has autocomplete enabled by default. </span><span class="c4">The autocomplete feature allows instrument commands to be cached by the browser, thus freeing the user from needing to remember the commands that had been entered during test development. </span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="c4">The Papaya GPIB Controller uses VXI-11 protocol for instrument control. This enables controller migration with little or no change to existing code utilizing NI-VISA. Python and C# example codes using Papaya GPIB Controller can be found at</span></p><p class="c5"><span class="c8"><a class="c10" href="https://www.google.com/url?q=https://github.com/papaya-iot/papaya-examples&amp;sa=D&amp;ust=1594107990921000&amp;usg=AOvVaw0LeLmmCitomHLCuDQNdIkw">https://github.com/papaya-iot/papaya-examples</a></span></p><p class="c3"><span class="c4"></span></p><h1 class="c29" id="h.5d5o0qts4dcd"><span class="c30">Getting Started</span></h1><p class="c5"><span>The Papaya Controller needs a USB-C power supply with current rating greater than 1.5 A.</span><span>&nbsp;By default, both the WiFi and Gigabit Ethernet interfaces use the DHCP protocol to obtain its IP address. The next few sections show detailed steps on how to configure the wireless connectivity for the first time. Users will need a PC with Bluetooth</span><span class="c39">&reg;</span><span class="c4">&nbsp;connectivity.</span></p><p class="c3"><span class="c4"></span></p><h1 class="c29" id="h.bkp6t6cqb3lt"><span class="c30">Wireless Setup</span></h1><p class="c5"><span>To setup the wireless connection for the first time, users will need a </span><span>Windows 7 or Windows </span><span>10</span><span>&nbsp;machine with Bluetooth</span><span class="c39">&reg;</span><span>&nbsp;connectivity. Windows 10 is preferred in this case as it comes with standard </span><span class="c4">Personal Area Network connectivity.</span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span>Turn on the Papaya GPIB controller with a USB-C power adapter and follow the steps outlined below after the controller is fully powered up. Place the Papaya GPIB controller close to the PC to ensure that the Bluetooth</span><span class="c39">&reg;</span><span class="c4">&nbsp;signal strength is strong enough for the PC to pair and communicate reliably.</span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span>1. Right click on the </span><span>Bluetooth</span><span class="c4">&nbsp;icon to join a Personal Area Network.</span></p><p class="c5"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 243.50px; height: 238.36px;"><img alt="" src="images/image23.png" style="width: 243.50px; height: 238.36px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="c4">2. The Devices and Printers window will appear. Right click to add a device.</span></p><p class="c5"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 373.50px; height: 263.03px;"><img alt="" src="images/image4.png" style="width: 373.50px; height: 263.03px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="c4">The Papaya GPIB device(s) will appear on the &ldquo;Add a device&rdquo; window. All Papaya GPIB devices are identified with a &ldquo;Papaya4-XXXX&rdquo; where XXXX are the last 2 bytes of the ethernet MAC address in hexadecimal format. The ethernet MAC address of the Papaya GPIB controller is printed on the unit. Then select the device that you would like to setup and click Next.</span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 302.50px; height: 231.75px;"><img alt="" src="images/image22.png" style="width: 302.50px; height: 231.75px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span>3. Once the setup is successful, the Papaya GPIB device will appear in the </span><span>Devices</span><span class="c4">&nbsp;under Control Panel\Hardware and Sound\Devices and Printers\Bluetooth Personal Area Network Devices. Right click the Papaya device icon and choose Connect using -&gt; Access point as shown below.</span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 346.50px; height: 244.05px;"><img alt="" src="images/image15.png" style="width: 346.50px; height: 244.05px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span>4. A Bluetooth</span><span class="c39">&reg;</span><span class="c4">&nbsp;Connection Successful dialog box pops up upon successful connection to the Papaya GPIB device.</span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 278.50px; height: 193.97px;"><img alt="" src="images/image6.png" style="width: 278.50px; height: 193.97px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span>5. Download the PuTTY SSH client application from: </span><span class="c8"><a class="c10" href="https://www.google.com/url?q=https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html&amp;sa=D&amp;ust=1594107990925000&amp;usg=AOvVaw2KGc704ilElPCz8EKCyuIY">https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html</a></span><span>. After installation of PuTTy, run the PuTTY SSH client application and enter the default 172.16.1.1 in the Host Name (or IP address) field and click Open. &nbsp;A PuTTY Security Alert window will appear. Click the Yes button to proceed.<br></span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 274.50px; height: 264.86px;"><img alt="" src="images/image32.png" style="width: 274.50px; height: 264.86px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 280.26px; height: 259.50px;"><img alt="" src="images/image34.png" style="width: 280.26px; height: 259.50px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c5"><span class="c4">A SSH client window will appear. Login using </span></p><p class="c5"><span class="c4">Username: pi </span></p><p class="c5"><span class="c4">Password: raspberry</span></p><p class="c5"><span class="c4">You are now logged in to the machine.</span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="c4">There are 2 options to configure the wireless: </span></p><p class="c3 c33"><span class="c4"></span></p><ol class="c40 lst-kix_rsylu4jixpt0-0 start" start="1"><li class="c0 c43"><span>The first option is to manually edit the /etc/wpa_supplicant/wpa_supplicant.conf. A WiFi configuration template can be found at </span><span class="c8"><a class="c10" href="https://www.google.com/url?q=https://github.com/papaya-iot/papaya-examples/blob/master/WifiTemplate/wpa_supplicant.conf&amp;sa=D&amp;ust=1594107990927000&amp;usg=AOvVaw10Y2QeilX6mNWGKDRuR2V6">https://github.com/papaya-iot/papaya-examples/blob/master/WifiTemplate/wpa_supplicant.conf</a></span><span class="c4">. The user can download and modify it for their specific environment. More information on wpa_supplicant information can be found at:</span></li></ol><p class="c0"><span class="c8"><a class="c10" href="https://www.google.com/url?q=https://www.freebsd.org/cgi/man.cgi?wpa_supplicant.conf(5)&amp;sa=D&amp;ust=1594107990927000&amp;usg=AOvVaw2I6cAAzhuynkLw_AdCPKc6">https://www.freebsd.org/cgi/man.cgi?wpa_supplicant.conf(5)</a></span><span class="c4">&nbsp;</span></p><p class="c0"><span class="c8 c42"><a class="c10" href="https://www.google.com/url?q=https://w1.fi/cgit/hostap/plain/wpa_supplicant/README&amp;sa=D&amp;ust=1594107990928000&amp;usg=AOvVaw2m6ep73JoUqdI4t2OrXuiF">https://w1.fi/cgit/hostap/plain/wpa_supplicant/README</a></span></p><p class="c3"><span class="c4"></span></p><p class="c0"><span class="c4">The second link has a lot of sample configurations that can be used as a starting point. Use the Papaya GUI to upload the pre-configured file as shown below.</span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 333.33px;"><img alt="" src="images/image33.png" style="width: 624.00px; height: 333.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3 c33"><span class="c4"></span></p><p class="c0"><span class="c4">In the Manual Upload section of the GUI, click the Browse button beside the Add Configuration File. Once the file has been selected, click the Upload file button. Successful file upload will be shown at the top of the web GUI.</span></p><p class="c3"><span class="c4"></span></p><ol class="c40 lst-kix_rsylu4jixpt0-0" start="2"><li class="c0 c43"><span>The second option is to use the built-in Papaya web interface. First, launch a web browser and enter </span><span>http://172.16.1.1</span><span>&nbsp;</span><span>in the address bar.</span><span>&nbsp;The GPIB Command Interface will show up. Note that loading the Papaya web interface is much slower in this case because using </span><span>Bluetooth</span><span class="c4">&nbsp;connection is usually slower than using WiFi.</span></li></ol><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 213.33px;"><img alt="" src="images/image5.png" style="width: 624.00px; height: 213.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3 c33"><span class="c4"></span></p><p class="c0"><span>To continue with WiFi configuration, click WiFi at the top banner of the web GUI. There are 4 types of configurations (PEAP, PSK, TLS, TTLS) that are supported by the WiFi Configuration GUI. For detailed descriptions of what these are and other WiFi that are not supported by the WiFi GUI, the user can refer to various examples in </span><span class="c8 c42"><a class="c10" href="https://www.google.com/url?q=https://w1.fi/cgit/hostap/plain/wpa_supplicant/README&amp;sa=D&amp;ust=1594107990930000&amp;usg=AOvVaw1q6UYKj-Nf71jC1fh-LUcK">https://w1.fi/cgit/hostap/plain/wpa_supplicant/README</a></span></p><p class="c3"><span class="c4"></span></p><p class="c3 c33"><span class="c4"></span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 333.33px;"><img alt="" src="images/image30.png" style="width: 624.00px; height: 333.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3 c33"><span class="c4"></span></p><p class="c0"><span class="c4">An example of PEAP configuration is shown in the next screenshot. The SSID is the name of the company&rsquo;s &nbsp;WiFi network, Identity is a valid user identity in the network and Security Key is the user&rsquo;s password. </span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 336.00px;"><img alt="" src="images/image31.png" style="width: 624.00px; height: 336.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span class="c4">The certificate is the 802.1X certificate which can be obtained from the network administrator. Use the Browse button to select the file where the certificate is located in the local computer.</span></p><p class="c3 c33"><span class="c4"></span></p><p class="c5"><span class="c4">6. Once the WiFi profile is uploaded to the Papaya GPIB device, the user can test if the wireless connection by clicking the Test button in the Test WiFi Connection section. Please note that updating the profile and subsequent connection to the configured WiFi AP will take 10-15 s. When the connection to the AP is successful, the Wireless Lan interface IP address will be displayed. &nbsp;Please note the assigned IP address for connecting to the Papaya GPIB address.</span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="c4">At this point the Papaya GPIB address is ready to use.</span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="c4">7. Downloading the WiFi Profile</span></p><p class="c5"><span class="c4">The user can download any pre-configured Wifi profile by clicking Download Profile in the WiFi Configuration File Setting. The user can then add additional profiles and then re-upload to the Papaya GPIB device using the Add Configuration File -&gt; Browse -&gt; Upload File sequence.</span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 310.67px;"><img alt="" src="images/image39.png" style="width: 624.00px; height: 310.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3"><span class="c4"></span></p><p class="c3 c33"><span class="c4"></span></p><p class="c5 c20"><span class="c4">8. Obtaining the IP address of both the Gigabit ethernet connection and WiFi connection.</span></p><p class="c5 c20"><span class="c4">The Papaya GPIB controller has both Gigabit ethernet and 2/5GHz WiFi interfaces. These two ethernet interfaces are configured to use DHCP protocol to obtain the IP addresses from a DHCP server. As a result, the IP addresses for these 2 interfaces might change over time unless it has been pre-configured by the network administrator to have a fixed IP address based on the MAC address of the Papaya controller. The mac address of the Papaya controller is labelled on the unit.</span></p><p class="c3 c20"><span class="c4"></span></p><p class="c5 c20"><span>To help the user using the Papaya GPIB controller in a DHCP networking environment, the Papaya GUI connected through Bluetooth Personal Area Network can help the user to find out the IP addresses of the interface. First the user will need to connect to the Bluetooth Personal Area Network and then type in</span><span>&nbsp;</span><span>http://172.16.1.1</span><span>&nbsp;</span><span class="c4">in the web browser address bar. Once connected, click on WiFi on the top banner of the Papaya GUI to load the WiFi Configuration File Setting interface.</span></p><p class="c3 c20"><span class="c4"></span></p><p class="c5 c20"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 333.33px;"><img alt="" src="images/image2.png" style="width: 624.00px; height: 333.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3 c20"><span class="c4"></span></p><p class="c5"><span class="c4">At the bottom of the page, click the Get Interface Info button and the IP and MAC addresses of both the Gigabit ethernet and Wireless LAN interfaces will be displayed. The user can then disconnect from the Bluetooth Personal Network and use the faster Gigabit or WiFi connection for normal operation.</span></p><p class="c3"><span class="c4"></span></p><h1 class="c29" id="h.tmogmryyqmyz"><span class="c30">Papaya GPIB Controller Interface</span></h1><p class="c5"><span class="c4">The Papaya GPIB controller interface is the default web GUI when the user connects to the controller. The user can use the web interface to scan, list and communicate with individual instruments connected to the GPIB bus. GPIB bus status such as ibsta, iberr and ibcntl are also shown in the Web GUI.</span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="c4">The Papaya GPIB Controller can be used to control laboratory instruments that have GPIB interfaces. It is assumed that the user is already familiar with GPIB requirements (for example, no instruments in the bus can have the same address, GPIB cable length limitations etc.) and how to configure specific instruments for GPIB control. The Papaya GPIB controller will use the address zero, 28 (reserved), 29 for RS232/UART and 30 for I2C communication. Instruments connected to a Papaya controller can use any address from 1 to 27. </span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="c4">The List Address and List Instrument buttons can be used to scan for instruments connected to the GPIB. The List Address button will list only the instrument addresses while the List Instrument button will send a *IDN? to all the instruments present on the bus. An example response is shown below. </span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 322.67px;"><img alt="" src="images/image38.png" style="width: 624.00px; height: 322.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="c4">Note that addresses 28,29 and 30 which are used by the Papaya Controller for I2C/RS232/UART interfaces do not show up even though they are functional. In addition, older instruments which do not respond to *IDN? query will show up with only its set GPIB address but with a blank instrument identity.</span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="c4">The Papaya Controller has 16kB of buffer when reading data from an instrument. Instruments such as an electrical spectrum analyzer might require more than 16kB of memory in order to transfer measured spectrum, especially with large numbers of points per trace and using ASCII as transfer mode. Multiple reads from the instrument may be required and the user can detect incomplete reads by checking on the data. For the example of an Agilent Technologies, MXA 9020A electrical spectrum analyzer, the incomplete trace data read after issuing the TRAC? TRACE1 command is shown below. In this case, the last row of data read is incomplete, since the exponent E+01 is missing. Clicking the Read button another time will read the remaining data until the read buffer is full. The read process can be repeated till all measured data is read from the instrument, as shown below.</span></p><p class="c3"><span class="c4"></span></p><p class="c3"><span class="c4"></span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 334.67px;"><img alt="" src="images/image10.png" style="width: 624.00px; height: 334.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c5"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 296.00px;"><img alt="" src="images/image21.png" style="width: 624.00px; height: 296.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3"><span class="c4"></span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 177.33px;"><img alt="" src="images/image24.png" style="width: 624.00px; height: 177.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span>An example of multiple reads of spectrum data in ASCII in a programmatic API call are in the </span><span class="c8"><a class="c10" href="https://www.google.com/url?q=https://github.com/papaya-iot/papaya-examples/tree/master/python&amp;sa=D&amp;ust=1594107990936000&amp;usg=AOvVaw3ColRMnZWCdUTcfbLctRxg">https://github.com/papaya-iot/papaya-examples/tree/master/python</a></span><span>&nbsp;folder (</span><span>papaya_visainst.py</span><span>). In this case, the MXA 9020A instrument class (class N9020A_SpectrumAnalyzer) will look for </span><span>newline </span><span>character in data from the spectrum analyzer and will repeat the read call until a </span><span>newline </span><span class="c4">character is found.</span></p><p class="c3"><span class="c4"></span></p><h1 class="c29" id="h.3esraggbbslk"><span class="c30">Papaya Controller using NI MAX GUI</span></h1><p class="c5"><span class="c4">The Papaya GPIB controller is VXI-11 compliant, as a result, the user can use the National Instruments NI MAX GUI as an alternate GUI to check for connectivity to the instrument. Equally important, it can be used as a trouble-shooting tool to make sure that the VXI-11 VISA resource is available and has been set up correctly.</span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="c4">The user will first need to install the NI MAX GUI, instructions can be found on </span></p><p class="c5"><span class="c8"><a class="c10" href="https://www.google.com/url?q=https://pyvisa.readthedocs.io/en/latest/faq/getting_nivisa.html%23faq-getting-nivisa&amp;sa=D&amp;ust=1594107990937000&amp;usg=AOvVaw2wwnONMkfhWMfE8FBRBd6Q">https://pyvisa.readthedocs.io/en/latest/faq/getting_nivisa.html#faq-getting-nivisa</a></span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="c4">Once installed, launch the NI MAX GUI, go to My System -&gt; Devices and Interfaces -&gt; Network Devices. </span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 417.00px; height: 240.00px;"><img alt="" src="images/image26.png" style="width: 417.00px; height: 240.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span><span class="c4">&nbsp;</span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="c4">On the right panel, click Add Network Device and choose Add TCP/IP resource and the following window will appear. Select Manual Entry of LAN Instrument and click Next.</span></p><p class="c5"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 405.33px;"><img alt="" src="images/image19.png" style="width: 624.00px; height: 405.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="c4">The IP address of the Papaya GPIB controller can be found using the procedure described previously. The format for the LAN Device Name is either &ldquo;gpib0,XX&rdquo; or &ldquo;instXX, where XX is the instrument GPIB address connected to the Papaya controller. </span></p><p class="c3"><span class="c4"></span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 501.33px;"><img alt="" src="images/image9.png" style="width: 624.00px; height: 501.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="c4">An example of using the format &ldquo;gpib0,XX&rdquo; is shown below. The next step is to click the Validate button and a dialog box will appear to let the user know if the resource has a VISA session. This is shown below. </span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="c4">Click the OK button in the Measurement and Automation Explorer dialog and the Finish button in the Create New dialog box. </span></p><p class="c5"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 484.00px;"><img alt="" src="images/image35.png" style="width: 624.00px; height: 484.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="c4">The new Network Devices will appear as shown. The user can then click Open Visa Test Panel to communicate with the instrument. The instrument is an Agilent MXA 9020 Electrical Spectrum Analyzer.</span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 482.67px;"><img alt="" src="images/image27.png" style="width: 624.00px; height: 482.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="c4">Clicking on Open VISA Test Panel will open a test panel with the name of the VISA resource as the title. </span></p><p class="c5"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 380.00px;"><img alt="" src="images/image29.png" style="width: 624.00px; height: 380.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="c4">Select Input/Output and the Basic I/O interface appears. We are going to show how to read a large amount of trace data from the connected spectrum analyzer. </span></p><p class="c5"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 382.67px;"><img alt="" src="images/image36.png" style="width: 624.00px; height: 382.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c5"><span>To do that , first increase the Bytes to Read to 20000 or 20 kB. This is in order to make full use of the Papaya GPIB controller read buffer which is 16 kB. The exact size does not matter as long as it is greater than the 16 kB (16383 bytes). Then set the transfer mode to ASCII by entering </span><span>FORMAT:TRACE:DATA ASCII </span><span class="c4">command into the command input box and then click Write.</span></p><p class="c5"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 393.33px;"><img alt="" src="images/image16.png" style="width: 624.00px; height: 393.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span>We are now ready to read the trace data which is greater than 16 kB. Enter </span><span>TRACE? TRACE1</span><span class="c4">&nbsp;into the Command input box and then click Query (write-then-read). The output is shown below.</span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 396.00px;"><img alt="" src="images/image11.png" style="width: 624.00px; height: 396.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="c4">Note that we have read 16383 bytes of data, which is incomplete as the buffer is full. Click the &nbsp;Read button again to initiate another read operation from the instrument and to obtain the following.</span></p><p class="c5"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 389.00px;"><img alt="" src="images/image14.png" style="width: 624.00px; height: 400.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c5"><span class="c4">The number of bytes read is 634 and this shows that all data has been read from the instrument. </span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="c4">As a final note, it is useful to check for connectivity through the National Instruments MAX GUI before using the Papaya GPIB controller to control the instrument programmatically.</span></p><p class="c3"><span class="c4"></span></p><h1 class="c29" id="h.yn5rbhpg5k1o"><span class="c30">Papaya Controller UART or RS232 Interface</span></h1><p class="c5"><span class="c4">This section provides the hardware information about the Papaya GPIB RS232 interface. The RS232 interface uses a driver circuit that meets ElA/TIA-232 and V.28/V.24 specifications. The output voltages swing are at +/- 5.4V typical of the maximum rate of 115200 bps. The connector used is a female RS232 connector and the signal pin definitions are as follows:</span></p><p class="c26"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 235.00px; height: 210.00px;"><img alt="" src="images/image18.png" style="width: 235.00px; height: 210.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="c4">Diagram showing female RS232 when viewing from the front of the connector. The pins are connected as shown below:</span></p><p class="c26 c15"><span class="c4"></span></p><a id="t.f6e1b7f74feddad4dcc99f7003f0207fd3f08bc5"></a><a id="t.0"></a><table class="c34"><tbody><tr class="c9"><td class="c14" colspan="1" rowspan="1"><p class="c16"><span class="c4">Pin Number</span></p></td><td class="c13" colspan="1" rowspan="1"><p class="c16"><span class="c4">Signal Name</span></p></td></tr><tr class="c9"><td class="c14" colspan="1" rowspan="1"><p class="c16"><span class="c4">1</span></p></td><td class="c13" colspan="1" rowspan="1"><p class="c16"><span class="c4">No Connect</span></p></td></tr><tr class="c9"><td class="c14" colspan="1" rowspan="1"><p class="c16"><span class="c4">2</span></p></td><td class="c13" colspan="1" rowspan="1"><p class="c16"><span class="c4">TxD</span></p></td></tr><tr class="c9"><td class="c14" colspan="1" rowspan="1"><p class="c16"><span class="c4">3</span></p></td><td class="c13" colspan="1" rowspan="1"><p class="c16"><span class="c4">RxD</span></p></td></tr><tr class="c9"><td class="c14" colspan="1" rowspan="1"><p class="c16"><span class="c4">4</span></p></td><td class="c13" colspan="1" rowspan="1"><p class="c16"><span class="c4">No Connect</span></p></td></tr><tr class="c9"><td class="c14" colspan="1" rowspan="1"><p class="c16"><span class="c4">5</span></p></td><td class="c13" colspan="1" rowspan="1"><p class="c16"><span class="c4">Ground</span></p></td></tr><tr class="c9"><td class="c14" colspan="1" rowspan="1"><p class="c16"><span class="c4">6</span></p></td><td class="c13" colspan="1" rowspan="1"><p class="c16"><span class="c4">5V &nbsp;(DSR)</span></p></td></tr><tr class="c9"><td class="c14" colspan="1" rowspan="1"><p class="c16"><span class="c4">7</span></p></td><td class="c13" colspan="1" rowspan="1"><p class="c16"><span class="c4">No Connect</span></p></td></tr><tr class="c9"><td class="c14" colspan="1" rowspan="1"><p class="c16"><span class="c4">8</span></p></td><td class="c13" colspan="1" rowspan="1"><p class="c16"><span class="c4">No Connect</span></p></td></tr><tr class="c9"><td class="c14" colspan="1" rowspan="1"><p class="c16"><span class="c4">9</span></p></td><td class="c13" colspan="1" rowspan="1"><p class="c16"><span class="c4">No Connect</span></p></td></tr></tbody></table><p class="c3"><span class="c4"></span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="c4">The Papaya Controller&rsquo;s RS232 interface supports 3 wire TxD, RxD and GND communication and hardware flow control is not supported. The minimum and maximum baud rate is 9600 and 115200 bps respectively and valid configurations are </span></p><p class="c5"><span class="c4">(1) 8 bits with no parity and 1 stop bits </span></p><p class="c5"><span class="c4">(2) 7 bits with odd parity and 1 stop bits and </span></p><p class="c5"><span class="c4">(3) 7 bits with even parity and 1 stop bits.</span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="c4">Pin 6 of the Papaya RS232 DB9 connector has been intentionally connected to 5V for Keysight Instruments (formerly Agilent/HP) such as E3631. In order to use a 3 wire RS232 communication with these instruments, the DTR(Data Terminal Read)/DSR(Data Set Ready) handshake has to be disabled by connecting the Data Set Ready pin logic TRUE. With this configuration, the Papaya controller RS232 interface allows a straight RS232 cable to be used to communicate with these types of instruments requiring DSR to be disabled for 3 wire TxD/RxD/GND communication. Most straight through RS232 cables in the market have all 9 DB9 pins connected end-to-end, irrespective of the connector genders at two ends of the cable. This is in contrast with a cross cable or null modem cable whereby only TxD, RxD and GND are connected between the two ends of the cable (with the TxD/RxD swapped). It is pointed out here that 2 concatenated cross cables can be used to isolate Pin 6 when a straight connection with Pin 6 isolation is needed. Alternatively,the user can purchase a version of the Papaya GPIB controller whereby Data Set Ready is not connected to logic True. Please always refer to instrument documentation in order to choose the appropriate type of RS232 cable.</span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="c4">The Papaya web interface for RS232 is shown below :</span></p><p class="c5"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 325.33px;"><img alt="" src="images/image3.png" style="width: 624.00px; height: 325.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="c4">The user should click the Read Config button to get the updated configuration before making changes to the RS232 interface. Typically, the user only needs to change the baud rate, number of bits and parity, for either ASCII write to instruments and raw byte writes to non-instrument RS232 devices.</span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="c4">Both Byte Timeout(us) and Msg Timeout(ms) are related to readings from the RS232 interface. The user will need to change the default values when they are reading a large amount of data or an instrument that is slow to respond (i.e. slow measurements and/or RS232 baud rate etc.). The default Msg Timeout(ms) is set to 5000ms or 5s: any read operation on the RS232 will wait for 5s for data to be available on the RxD line before it times out and finishes. </span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="c4">Byte Timeout(us) is related to the read duration to read data on the RxD line. When it is set to 100000us or 0.1s, the RxD line is read for 0.1s, even if all the data that has been transmitted has been read before the 0.1s interval is complete. For example, if the data to be read is small, then the Byte Timeout(us) should be set to a small value to improve the response time. On the other hand, when reading in a large amount of data, the user will need to increase the Byte Timeout(us) to a few seconds in order to completely read in the data. Note that the Byte Timeout value also depends on the baud rate.</span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span>For more detailed information on low level implementation, refer to </span><span class="c8"><a class="c10" href="https://www.google.com/url?q=http://man7.org/linux/man-pages/man3/termios.3.html&amp;sa=D&amp;ust=1594107990951000&amp;usg=AOvVaw1MkWwrtejAaqoUExSBq0ZU">http://man7.org/linux/man-pages/man3/termios.3.html</a></span><span class="c46">&nbsp;</span><span>( Papaya GPIB controller uses Non-canonical mode with MIN == 0, TIME &gt; 0) &nbsp;and </span><span class="c8"><a class="c10" href="https://www.google.com/url?q=https://www.cmrr.umn.edu/~strupp/serial.html&amp;sa=D&amp;ust=1594107990952000&amp;usg=AOvVaw037BOmq-WGTfvBCLV2G6wD">https://www.cmrr.umn.edu/~strupp/serial.html</a></span><span>. Implementation of C# and Python examples can be found in </span><span class="c8"><a class="c10" href="https://www.google.com/url?q=https://github.com/papaya-iot/papaya-examples&amp;sa=D&amp;ust=1594107990952000&amp;usg=AOvVaw3qka43asMze1CTKqf1-gGP">https://github.com/papaya-iot/papaya-examples</a></span><span>.</span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="c4">Once all the required changes are made to the Web GUI, the user must click Update Config for the new RS232 interface parameters to take effect.</span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="c4">Next, we will describe how to perform ASCII character write and raw bytes write using the Papaya RS232 interface in the following:</span></p><ol class="c40 lst-kix_tnr4m46lq3qn-0 start" start="1"><li class="c28"><h2 id="h.44jgokw27oir" style="display:inline"><span class="c19">ASCII Character Write.</span></h2></li></ol><p class="c0"><span class="c4">The ASCII character write is straight-forward as shown in the example in which we communicate to a Keithley 2510 temperature controller. &nbsp;The baud rate is set to 57600, 7 bits with odd parity, and 1 stop bit. Most of the instruments when during remote operation with RS232 uses the newline character (hex 0x0A) as a termination character, and as a result, the Add Newline checkbox is active by default which will add a newline character automatically at the end of the content entered into the Send String input box. In this particular case, an Identify command *IDN? is entered. Once the Query button is clicked, the identity of the instrument is displayed in the Response box as shown below.</span></p><p class="c3 c33"><span class="c4"></span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 333.33px;"><img alt="" src="images/image13.png" style="width: 624.00px; height: 333.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3 c33"><span class="c4"></span></p><ol class="c40 lst-kix_tnr4m46lq3qn-0" start="2"><li class="c28"><h2 id="h.pqvthk2ncn9i" style="display:inline"><span class="c19">Raw Byte Write-Query Mode</span></h2></li></ol><p class="c0"><span class="c4">The user has to use Hexadecimal representation of the bytes in order to use the raw bytes mode to communicate to a RS232/UART device. In this mode, the user needs to (1) enter the byte array to be sent in the Send String box in hex representation, (2) uncheck Add Newline and (3) check Use Bytes checkbox in order to activate Raw Byte mode for the Papaya GPIB controller.</span></p><p class="c3 c33"><span class="c4"></span></p><p class="c0"><span class="c4">A Keithley 2510 instrument is used to demonstrate how to use the raw byte mode. The string &ldquo;*IDN?\n&rdquo; in raw byte array would be &ldquo;2a49444e3f0a&rdquo;. We enter (1) &ldquo;2a49444e3f0a&rdquo; in the Send String input box, (2) uncheck the Add Newline checkbox and (3) check Use Bytes checkbox. The return value from the instrument after clicking the Query button is shown below </span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 325.33px;"><img alt="" src="images/image12.png" style="width: 624.00px; height: 325.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3 c33"><span class="c4"></span></p><p class="c0"><span class="c4">The response from the instrument is displayed as hex values when the communication is in raw byte mode. Since we know that the response from the &ldquo;*IDN?\n&rdquo; query to the instrument is in ASCII, we can click the Toggle Hex/ASCII button to translate the byte stream into human readable text as shown to confirm proper operation.</span></p><p class="c3 c33"><span class="c4"></span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 329.33px;"><img alt="" src="images/image7.png" style="width: 624.00px; height: 329.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3"><span class="c4"></span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span>For programmatic use of Papaya GPIB controller, please refer to &nbsp; </span><span class="c8"><a class="c10" href="https://www.google.com/url?q=https://github.com/papaya-iot/papaya-examples&amp;sa=D&amp;ust=1594107990955000&amp;usg=AOvVaw2C0jFGLDONJZM9TE9Ij8xJ">https://github.com/papaya-iot/papaya-examples</a></span><span class="c4">.</span></p><p class="c3"><span class="c4"></span></p><h1 class="c29" id="h.os8eq2r9rz5b"><span class="c30">Papaya GPIB I2C Interface</span></h1><p class="c5"><span class="c4">The papaya GPIB controller has one I2C interface that is accessed through a 4 pin header as shown in the diagram below.</span></p><p class="c5"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 352.00px;"><img alt="" src="images/image28.png" style="width: 624.00px; height: 352.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3"><span class="c4"></span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="c4">The voltage of the Vcc pin is 3.3V. Both the I2C signalling pins SCL and SDA have 1.8kOhms pull-up to Vcc installed on the board. The I2C is default to 100kHz with a maximum operating frequency of 400kHz. </span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="c4">Once connected to the Papaya web interface, the I2C web control can be accessed by clicking I2C located on the top banner. The I2C Command Interface is shown below. </span></p><p class="c3"><span class="c4"></span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 329.33px;"><img alt="" src="images/image37.png" style="width: 624.00px; height: 329.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="c4">The I2C bus supports up to 125 connected devices. The #Bytes to Read input is in decimal, but all other input or output boxes use hexadecimal number representation. In addition, hex numbers entered in the Bytes to Write input box need to be preceded by a forward slash &lsquo;/&rsquo;.</span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="c4">To scan the I2C devices present on the bus, click the Scan for Devices button and devices present on the I2C bus will have their addresses displayed in the box on the right in hex representation. An example is shown below.</span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 330.67px;"><img alt="" src="images/image1.png" style="width: 624.00px; height: 330.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c5"><span class="c4">In the example above, there are 4 devices connected to the bus. Please note that any unpowered I2C devices connected to the bus will potentially result in faulty communication with the powered devices. This is due to the circuit loading of the un-powered I2C devices.</span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="c4">In addition, there is a 1.8K pull-up resistor on the SCL and SDA signal lines respectively. As a result, additional pull-up resistors might affect the reliable communication to the connected I2C devices.</span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span>The Papaya I2C Command Interface has 4 input fields. Hexadecimal representation is used for Device Address, Register Address as well as Bytes To Write input boxes. The Device Address is the first byte to be written on the I2C bus. The second byte is the Register Address byte followed by data bytes entered in Bytes to Write input field. The input to the Bytes to Write field must start with a forward slash &lsquo;/&rsquo; and actual data represented by hex numbers. Note that no actual data will be written onto the I2C bus if odd number of hex numbers are entered.</span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span>As an example, we use a commonly available 12bit DAC to demonstrate the use of the Papaya controller for I2C device control. The device is a Microchip MCP4725 12 bit I2C Digital-to-Analog Converter (DAC), the datasheet is available at </span><span class="c8"><a class="c10" href="https://www.google.com/url?q=http://ww1.microchip.com/downloads/en/DeviceDoc/22039d.pdf&amp;sa=D&amp;ust=1594107990959000&amp;usg=AOvVaw3acs2_hT8vsrev2z_07_oa">ww1.microchip.com/downloads/en/DeviceDoc/22039d.pdf</a></span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="c4">The user can use the VCC header pin on the Papaya Controller to power the 12 bit DAC. Connect the ground, SDA and SCL pins to the MCP4725. For our device, the A2, A1, A0 pins have been programmed to be zeros, giving an I2C address of 0x60. Clicking the Scan for Devices button on the I2C Command Interface shows connectivity with the MCP4725. </span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="c4">The MCP4725 device in Fast Write Mode has the 4 most significant bits of the DAC data (12 bits length) being part of the &ldquo;Register Address&rdquo; byte. The user in this case will need to interpret the &ldquo;Register Address&rdquo; byte to be the second byte to be written as explained previously. </span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="c4">For example, if the DAC count to be written is 2288 decimal (hex is 8F0), then the following values should be written as shown.</span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span>Reading back 3 bytes will show that the data has been written successfully. The 12bit DAC values in read mode is the 3rd to 5th byte, with the first by being &lsquo;C&rsquo;, please refer to the </span><span>datasheet</span><span>&nbsp;of MCP4725 (</span><span class="c8"><a class="c10" href="https://www.google.com/url?q=http://ww1.microchip.com/downloads/en/DeviceDoc/22039d.pdf&amp;sa=D&amp;ust=1594107990961000&amp;usg=AOvVaw26EnT6QWBM0LUnBadGOMfq">ww1.microchip.com/downloads/en/DeviceDoc/22039d.pdf</a></span><span>)</span><span class="c4">.</span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 244.00px;"><img alt="" src="images/image17.png" style="width: 624.00px; height: 244.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span>For programmatic use of the I2C through the VXI-11 or Http Application Programmable Interface, please refer to </span><span class="c8"><a class="c10" href="https://www.google.com/url?q=https://github.com/papaya-iot/papaya-examples&amp;sa=D&amp;ust=1594107990963000&amp;usg=AOvVaw2lJnSFEdQbjNGqYtuXIXOz">https://github.com/papaya-iot/papaya-examples</a></span><span>. In addition, the python API includes drive codes for both MCP4725 and BOSH BME280 humidity and pressure sensor. We highlight here that the BME280 drive originates from a wired I2C code, and a straightforward change in the low level write using the Papaya I2C API will result in BME280 to be controlled over </span><span>WiFi or LAN interfaces.</span><span class="c4">&nbsp;</span></p><p class="c3"><span class="c4"></span></p><p class="c3"><span class="c4"></span></p><p class="c3"><span class="c4"></span></p><p class="c3"><span class="c4"></span></p><h1 class="c29" id="h.d37f7mgay256"><span class="c30">Programming the Papaya Controller</span></h1><p class="c5"><span class="c4">The GPIB address for RS232 interface has the GPIB address of 29 and the I2C interface has the GPIB address of 30. As a result, GPIB instruments connected to the GPIB bus must be configured to have addresses between 1 and 27 (GPIB address of 28 is reserved)</span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="c4">The user is able to use the National Instruments NI MAX to communicate to all connected GPIB instruments (note that not all instruments responds to the *IDN? query). </span></p><p class="c3"><span class="c4"></span></p><h2 class="c31" id="h.35333t83hlo8"><span class="c19">C# API Programming Setup</span></h2><p class="c5"><span class="c4">In this section, we present the steps needed to use the Papaya GPIB controller in C# as an illustration of how to use the National Instruments VISA library for instrument control. This also shows how easy it is to port existing code base to use the Papaya GPIB controller given that the same low level drivers are used.</span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span>Note that the installation requires the Visual Studio environment to be installed first before installing the .NET API drivers. The C# based </span><span>Papaya demo</span><span>&nbsp;GUI </span><span class="c8"><a class="c10" href="https://www.google.com/url?q=https://github.com/papaya-iot/papaya-examples/tree/master/Csharp/visa_19p0/PapayaDemo1&amp;sa=D&amp;ust=1594107990966000&amp;usg=AOvVaw3M_y2YeUgOBzLH7ZomrYQA">https://github.com/papaya-iot/papaya-examples/tree/master/Csharp/visa_19p0/PapayaDemo1</a></span><span>&nbsp;which contains the C# API driver for Papaya GPIB Controller, </span><span>uses Visual Studio 2019 Community Edition </span><span class="c8"><a class="c10" href="https://www.google.com/url?q=https://visualstudio.microsoft.com/downloads/&amp;sa=D&amp;ust=1594107990967000&amp;usg=AOvVaw3363HZ4rZvywqKWRD2_X_W">https://visualstudio.microsoft.com/downloads/</a></span><span class="c4">.</span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span>To install the VISA driver, go to &nbsp;</span><span class="c8"><a class="c10" href="https://www.google.com/url?q=http://www.ni.com/product-documentation/14434/en/&amp;sa=D&amp;ust=1594107990968000&amp;usg=AOvVaw31mL9g9phDFmm9gPhrDo43">http://www.ni.com/product-documentation/14434/en/</a></span><span class="c4">&nbsp;and go to Download NI .NET APIs sections which shows a table for available drivers. Install the VISA driver from the follow link </span></p><p class="c5"><span class="c8"><a class="c10" href="https://www.google.com/url?q=https://www.ni.com/en-us/support/downloads/drivers/download.ni-visa.html%23329456&amp;sa=D&amp;ust=1594107990968000&amp;usg=AOvVaw121GAG_EtavYOy9_rkxUkf">https://www.ni.com/en-us/support/downloads/drivers/download.ni-visa.html#329456</a></span><span>. Please follow the installation instructions and make sure that NI-VISA .NET Runtime, NI-VISA .NET Development Support and NI-VISA C examples are selected. Once the driver has been installed, the user can go to C:\Users\Public\Documents\National Instruments\NI-VISA\Examples\.NET\19.0\SimpleReadWrite\ folder and open the SimpleReadWrite.2015.sln solution file with Visual Studio. </span><span>Proceed to build the solution, then run the </span><span class="c4">executable file and a SimpleReadWrite dialog below will be presented.</span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 255.50px; height: 266.15px;"><img alt="" src="images/image20.png" style="width: 318.04px; height: 269.47px; margin-left: -62.54px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="c4">This indicates the development environment and the NI-VISA driver is ready to be used to compile the Papaya API driver. </span></p><p class="c5"><span>The source code of the Papaya Demo can be obtained from </span><span class="c8"><a class="c10" href="https://www.google.com/url?q=https://github.com/papaya-iot/papaya-examples/tree/master/Csharp&amp;sa=D&amp;ust=1594107990970000&amp;usg=AOvVaw1xJD50ptI3TUv5DWqGYZQD">https://github.com/papaya-iot/papaya-examples/tree/master/Csharp</a></span><span class="c4">. Use git clone to clone the solution which contains the Papaya API driver source code and the Demo GUI that uses it.</span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="c4">Run Visual Studio and open the C# solution file PapayaDemo1.sln. In the Solution Explorer, browse to ppyGpibNetClass.cs. This file contains all the GPIB, RS232/UART and I2C API calls that the user can use programmatically in their applications. </span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="c4">For the Python install, please refer to </span></p><p class="c5"><span class="c8"><a class="c10" href="https://www.google.com/url?q=https://github.com/papaya-iot/papaya-examples/tree/master/python&amp;sa=D&amp;ust=1594107990972000&amp;usg=AOvVaw1eBh-uu5mmrcrJA9AwzV0Z">https://github.com/papaya-iot/papaya-examples/tree/master/python</a></span><span class="c4">.</span></p><p class="c5"><span class="c4">The Papaya GPIB controller has been tested using PyCharm Community Edition </span></p><p class="c5"><span class="c8"><a class="c10" href="https://www.google.com/url?q=https://www.jetbrains.com/pycharm/download/%23section%3Dwindows&amp;sa=D&amp;ust=1594107990973000&amp;usg=AOvVaw2HJJ3E5Tspf2-BAMm6-zXl">https://www.jetbrains.com/pycharm/download/#section=windows</a></span><span>, </span><span>Spyder IDE,</span></p><p class="c5"><span class="c8"><a class="c10" href="https://www.google.com/url?q=https://docs.spyder-ide.org/installation.html&amp;sa=D&amp;ust=1594107990973000&amp;usg=AOvVaw14J5rukH3wqPLIoRg4K9US">https://docs.spyder-ide.org/installation.html</a></span><span class="c4">, and PyScripter</span></p><p class="c5"><span class="c8"><a class="c10" href="https://www.google.com/url?q=https://github.com/pyscripter/pyscripter/wiki/Features&amp;sa=D&amp;ust=1594107990974000&amp;usg=AOvVaw3KuYAuc-nbPhQ0_9iSmyMt">https://github.com/pyscripter/pyscripter/wiki/Features</a></span><span class="c4">.</span></p><h2 class="c44" id="h.jk5qrd8oevra"><span class="c19">C# and Python API</span></h2><p class="c7"><span class="c4">The Papaya Controller C# and Python API are distributed with source code. The API information provided in the following sections apply to both the C# and Python API. Please use the following link to download the API.</span></p><p class="c7"><span class="c8"><a class="c10" href="https://www.google.com/url?q=https://github.com/papaya-iot/papaya-examples&amp;sa=D&amp;ust=1594107990975000&amp;usg=AOvVaw00CAbom1LtNipUNvWf88AJ">https://github.com/papaya-iot/papaya-examples</a></span><span class="c4">.</span></p><p class="c7"><span class="c4">The C# GPIB, I2C and UART/RS232 API calls can be obtained in the ppyGpibNetClass.cs file. How these API are used to communicate with the Papaya controller can be found in the PapayaDemo1.sln. There are 2 versions of C# examples, using National instruments VISA versions 13.0 and 19.0. The Papaya controller has been tested in both versions.</span></p><p class="c7"><span>For the Python API, the GPIB, I2C and UART/RS232 calls can be found in papaya_visainst.py, papaya_i2cinst.py and papaya_uartinst.py respectively. The Python file tectest_</span><span>eaxmple</span><span class="c4">.py shows users how to use the GPIB, I2C and UART APIs. It is pointed out here that papaya_visainst.py, papaya_i2cinst.py and papaya_uartinst.py include instrument drivers that users can use as a starting point for their applications. The codes have been tested extensively on National Instruments VISA versions 13.0 and 19.0.</span></p><p class="c7"><span class="c4">For how to use these APIs, this user guide has taken the approach that is relevant to both languages whenever possible. The exception to this rule is when it is necessary to highlight certain important details, in that case, C# code examples are used.</span></p><p class="c7 c15"><span class="c4"></span></p><h2 class="c44" id="h.k97r47tchzc9"><span class="c19">GPIB API</span></h2><p class="c7"><span class="c4">A MessageBasedSession will need to be initialized in order to communicate with the Papaya controller. The resource name format is</span></p><p class="c7"><span class="c4">&nbsp;resourceName = &quot;TCPIP0::&quot; + ipAddress + &quot;::&quot; + device + &quot;::INSTR&quot;;</span></p><p class="c7"><span class="c4">The device is either of the form gpib0,GpibAddress or instGpibAddress. For an instrument with GPIB address of 28, the resource name is either gpib0,28 or inst28. The gpib0 is fixed for the Papaya controller. The IP Address is the IPv4 network address of the device. </span></p><p class="c7"><span>Once the MessageBaseSession is initialized, the next step is to change the timeout and buffer size. This is important when the instrument that the user is trying to control will return a large amount of measured data, e.g., a spectrum analyzer. The buffer size of the GPIB read for the Papaya controller is 16 kB </span><span>so </span><span class="c4">the buffer size will need to set up greater than 16384 bytes. Timeout will need to be increased accordingly.</span></p><p class="c7"><span class="c4">mSession.DefaultBufferSize = 20000; // 20kB buffer size &nbsp;for NI-VISA version 13</span></p><p class="c7"><span class="c4">mSession.RawIO.Read((long)_readBufferSize); //NI-VISA version 19.0, where _readBufferSize is the maximum number of bytes to read.</span></p><p class="c7 c15"><span class="c4"></span></p><p class="c7"><span class="c4">mSession.Timeout = 1500 ; // number is in ms, timeout set to 1.5s, for NI-VISA version 13</span></p><p class="c7"><span class="c4">mSession.TimeoutMilliseconds = 1500; # for NI-VISA version 19.0</span></p><p class="c7 c15"><span class="c4"></span></p><p class="c7"><span class="c38">GPIB write</span><span class="c4">&nbsp;</span></p><p class="c7"><span>The GPIB write is straightforward with mSession.write(cmd) or mSession.write(ByteArray). </span></p><p class="c7 c15"><span class="c4"></span></p><p class="c7"><span class="c12">GPIB read</span></p><p class="c7"><span class="c4">The GPIB read operation can either be reading raw bytes or reading as a string. mSession.ReadBytesArray() and mSession.ReadString() perform read operation in raw bytes and string respectively. In the ppyGpibNetClass, both API calls are provided but the demo uses the mSession.ReadBytesArray() implementation. This is because ReadBytesArray() are more versatile, as it is straightforward to re-interpret the contents of the byte array as ASCII codes and it allows reading IEEE 488.2 coded binary data. &nbsp;Please see the explanation on the IEEE 488.2 data format. The use of IEEE 488.2 coded binary data is a much more efficient representation of floating point data resulting in faster transfer of measured data from the instrument to the user. Nonetheless, it requires additional processing of the binary data but ppyGpibNetClass provides methods to decode them to a numeric array.</span></p><p class="c7"><span class="c4">To interpret the byte array data as ASCII coded data, the following code sequence can be used:</span></p><p class="c7"><span class="c4">byte[] resp &nbsp;= null;</span></p><p class="c7"><span class="c4">resp = mSession.ReadBytesArray();</span></p><p class="c7"><span class="c4">string readstring = System.Text.Encoding.ASCII.GetString(resp);</span></p><p class="c7 c15"><span class="c4"></span></p><p class="c7"><span class="c12">GPIB query</span></p><p class="c7"><span class="c4">The query operation is a write operation followed immediately by a read operation. Please see the GPIB read for more information on read.</span></p><p class="c7 c15"><span class="c4"></span></p><h2 class="c44" id="h.l4i5gbinsp7b"><span class="c19">IEEE 488.2 Data Format</span></h2><p class="c7"><span class="c4">Instruments such as oscilloscopes and spectrum analyzers perform waveform and spectra measurements which usually result in large amounts of measured data to be transferred to the user. As a result, most of them support IEEE 488.2 binary fixed length encoding for efficient transfer of large amounts of data.</span></p><p class="c7"><span class="c4">The format consists of &ldquo;#&rdquo; (ASCII), one numeric (ASCII) indicating the number of bytes that specifies the length after #, length designation (ASCII), and binary data of a specified length in this order. Binary data consists of a floating point data string of 8 bytes (64 bits) or 4 bytes (32 bits). Floating-point data consists of lower order bytes to higher-order bytes.</span></p><p class="c7"><span class="c4">E.g.: #18 [eight &lt;byte data&gt;]</span></p><p class="c7"><span class="c4">#280[80 &lt;byte data&gt;]</span></p><p class="c7"><span class="c4">#48008[8008 &lt;byte data&gt;]</span></p><p class="c7"><span>Equipment manufacturers normally recommend the 64 bits (8 bytes per floating point) instead of 32 bits fixed length format for accuracy. The ppyGpibNetClass contains a method, binaryToDouble64() that decodes the 64 bits IEEE 488.2 binary fixed length encoded data. Even though the 64bits floating point format conforms to the IEEE-754 format, some instruments may choose to transfer the least significant byte first (little endian), while other instruments may transfer the most significant byte first(big endian). The swapOrder parameter in the binaryToDouble64() input argument allows the user to decode the fixed length data depending if the instrument transfers the least significant byte first. Setting swapOrder to false when the transfer is little endian or least significant byte first. Some modern instruments allow the byte order to be changed during data transfer </span><span>so </span><span class="c4">users should refer to instrument documentation in order to decode the fixed length data correctly.</span></p><p class="c7 c15"><span class="c4"></span></p><h2 class="c44" id="h.v0q5c7dwy4fh"><span class="c19">UART/RS232 API</span></h2><p class="c7"><span class="c4">There C# API for UART/RS232 interface is (1) read, (2) write, (3) query, (4) get UART interface settings and (5) set UART interface setting</span></p><p class="c7"><span class="c4">To set and get the UART interface settings, the 16 byte format for Papaya UART is as follows:</span></p><p class="c7"><span class="c4">Command (1 byte), Data length (2 bytes), uartConfig (1 byte), Data Rate (4 bytes), ,msgTimeout_ms (4 bytes) and byteTimeout_us (4 bytes).</span></p><p class="c7"><span class="c12">The command is a single byte:</span></p><p class="c7 c15"><span class="c4"></span></p><a id="t.d2e4ad31f060a639426468c93dd00a7b123c43c9"></a><a id="t.1"></a><table class="c32"><tbody><tr class="c9"><td class="c41" colspan="1" rowspan="1"><p class="c22"><span class="c38 c45">Command byte value</span></p></td><td class="c24" colspan="1" rowspan="1"><p class="c22"><span class="c45 c38">Operation</span></p></td></tr><tr class="c9"><td class="c41" colspan="1" rowspan="1"><p class="c22"><span class="c36">0</span></p></td><td class="c24" colspan="1" rowspan="1"><p class="c22"><span class="c36">No operation (reserved)</span></p></td></tr><tr class="c9"><td class="c41" colspan="1" rowspan="1"><p class="c22"><span class="c36">1</span></p></td><td class="c24" colspan="1" rowspan="1"><p class="c22"><span class="c36">Query (write followed by read operations)</span></p></td></tr><tr class="c9"><td class="c41" colspan="1" rowspan="1"><p class="c22"><span class="c36">2</span></p></td><td class="c24" colspan="1" rowspan="1"><p class="c22"><span class="c36">Write operation</span></p></td></tr><tr class="c9"><td class="c41" colspan="1" rowspan="1"><p class="c22"><span class="c36">3</span></p></td><td class="c24" colspan="1" rowspan="1"><p class="c22"><span class="c36">Set UART interface configurations</span></p></td></tr><tr class="c9"><td class="c41" colspan="1" rowspan="1"><p class="c22"><span class="c36">4</span></p></td><td class="c24" colspan="1" rowspan="1"><p class="c22"><span class="c36">Get UART interface configurations</span></p></td></tr></tbody></table><p class="c7 c15"><span class="c4"></span></p><p class="c7"><span class="c38">The Data length is fixed to 13 bytes :</span><span class="c4">&nbsp;</span></p><p class="c7"><span>data</span><span class="c4">&nbsp;length (13 byte) = &nbsp;uartConfig (1 byte) + Data Rate (4 bytes) + msgTimeout_ms (4 bytes) + byteTimeout (4 byte).</span></p><p class="c7"><span class="c4">The UART configuration byte has the bit value definitions as shown below:</span></p><p class="c7 c15"><span class="c4"></span></p><a id="t.b1a208b53454d151e534b9df8cd74ea110365384"></a><a id="t.2"></a><table class="c32"><tbody><tr class="c9"><td class="c11" colspan="1" rowspan="1"><p class="c16"><span class="c6">Bit</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c16"><span class="c6">7</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c16"><span class="c6">6</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c16"><span class="c6">5</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c16"><span class="c6">4</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c16"><span class="c6">3</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c16"><span class="c6">2</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c16"><span class="c6">1</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c16"><span class="c6">0</span></p></td></tr><tr class="c9"><td class="c11" colspan="1" rowspan="1"><p class="c16 c15"><span class="c23"></span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c25"><span class="c23">RS_CHAR_3</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c25"><span class="c23">RS_CHAR_2</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c25"><span class="c23">RS_CHAR_1</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c25"><span class="c23">RS_CHAR_0</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c7"><span class="c23">RS_PARITY_2</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c7"><span class="c23">RS_PARITY_1</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c7"><span class="c23">RS_PARITY_0</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c25"><span class="c23">RS_STOP_0</span></p></td></tr></tbody></table><p class="c7 c15"><span class="c4"></span></p><p class="c7"><span>The RS_CHAR 0:3 </span><span>nibble (4 bits) </span><span>defines the UART character. The valid values are 0, 1, 2 and 3 which correspond to 5, 6, 7 and 8 data bits respectively. The next 3 bits </span><span>UART parity bits whereby </span><span class="c4">&nbsp;RS_PARITY 0:2 takes on the value of 0, 1 and 2 for &ldquo;no&rdquo;, &ldquo;odd&rdquo; and &ldquo;even&rdquo; parity respectively. RS_STOP_0 has 0 value for a single stop bit, and 1 for 2 stop bits.</span></p><p class="c7"><span class="c4">The msgTimeout_ms is the time in milliseconds in which the Papaya controller will wait for data on the UART RxD line before timing out. The byteReadTimeout_us is the duration in which the Papaya Controller will read data transmitted onto the RxD line. When there is a large amount of data to be read in on the RxD data line, the byteReadTimeout_us needs to be increased. Note that the unit of measure is in microseconds.</span></p><p class="c7"><span class="c4">The method uartSetConfig(ref int dataRate, ref byte numBits, ref byte parity, ref byte stopBits, ref int msgTimeout_ms, ref int byteReadTimeout_us) will pack all the UART configuration settings into a 16 byte long array and send it to the Papaya controller. The user can use the uartGetConfig() method to retrieve the current UART settings. The command number for uartSetConfig and uartGetConfig are 3 and 4 respectively.</span></p><p class="c7 c15"><span class="c4"></span></p><p class="c7"><span class="c12">UART Write </span></p><p class="c7"><span class="c4">The UART write operation has the following format:</span></p><p class="c7"><span class="c4">Command (1 byte), Data length (2 bytes), Data (Variable number of bytes).</span></p><p class="c7"><span class="c4">Command number is 0x02. The 2 byte long Data length is the length of the data to be written onto the TxD line in bytes. </span></p><p class="c7 c15"><span class="c4"></span></p><p class="c7"><span class="c12">UART Query and Read</span></p><p class="c7"><span class="c4">Both the UART query and read have the same format:</span></p><p class="c7"><span class="c4">Command (1 byte), Data length (2 bytes), Data (Variable number of bytes). </span></p><p class="c7"><span class="c4">The query command starts with a write operation in which the data bytes are written onto the TxD line. Besides the command value being 0x01, the 2 byte data length and actual data are formatted the same way as the UART write. Once the write operation is completed, a read operation is performed in which the Papaya controller will wait msgTimeout_ms for data to be present on the RxD and continue to read data for byteReadTimeout_us duration. &nbsp;</span></p><p class="c7"><span>The UART read operation is the same as a query with 2 byte data length set to zero with no actual data to be written. In this case, the Papaya controller will not perform a write operation on the TxD line, but will proceed to </span><span>wait </span><span class="c4">msgTimeout_ms for data to be present on the RxD and continue to read data for byteReadTimeout_us duration. As a result, UART read and query use the same method uartQueryBytes(int len, byte[] data, ref byte[] dataReadback).</span></p><p class="c7"><span class="c4">When UART/RS232 is used to communicate with an instrument, the query operation is different from when communicating through the GPIB interface. In the case of communicating with the GPIB interface, the instrument will start transmitting its data after the GPIB controller has informed that it is the talker on the GPIB bus. On the other hand, when communicating through the UART interface, the instrument will respond to the query as soon as it is ready. Papaya controller UART query is designed to handle such use cases, and as a result, users only need to adjust msgTimeout_ms and byteReadTimeout_us parameters depending on the instruments used.</span></p><p class="c7"><span class="c4">In addition, the Papaya controller has the UART header pins as shown below. The pin definitions are shown on the silkscreen of the PCBA. The </span></p><p class="c7"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 549.00px; height: 295.00px;"><img alt="" src="images/image8.png" style="width: 549.00px; height: 295.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c7 c15"><span class="c4"></span></p><p class="c7"><span class="c4">The 3 header pins are GND, Rx and Tx, which are ground signal, Papaya Controller receive and Papaya Controller transmit respectively. Note that the signal is 3.3V and damage will result if driven at higher voltages.</span></p><p class="c7 c15"><span class="c4"></span></p><h2 class="c44" id="h.tu5gtxamkuok"><span class="c19">I2C API</span></h2><p class="c7"><span class="c4">There are 3 commands for the I2C interface. The 3 commands are bus scan, read and write. </span></p><p class="c7"><span class="c4">The bus scan command is used to find out the I2C devices on the bus that are connected to the bus. The generic byte structure of I2C commands are as follows:</span></p><p class="c7 c15"><span class="c4"></span></p><a id="t.8906859a684a983419dc555e447284a386dc5520"></a><a id="t.3"></a><table class="c32"><tbody><tr class="c9"><td class="c27" colspan="1" rowspan="1"><p class="c16"><span class="c4">Command byte</span></p></td><td class="c27" colspan="1" rowspan="1"><p class="c16"><span class="c4">Dev Addr Byte</span></p></td><td class="c27" colspan="1" rowspan="1"><p class="c16"><span class="c4">Dev Reg Byte</span></p></td><td class="c27" colspan="1" rowspan="1"><p class="c16"><span class="c4">Length Byte</span></p></td><td class="c27" colspan="1" rowspan="1"><p class="c16"><span class="c4">Data Bytes</span></p></td></tr></tbody></table><p class="c7 c15"><span class="c4"></span></p><p class="c7"><span class="c4">The content of the length byte is the length of the data byte and not the total length of the bytes to be transferred to the Papaya controller. The command byte definitions are shown in the table below:</span></p><p class="c7 c15"><span class="c4"></span></p><a id="t.fa67d4b22d78f492aca36aa2e1ea81f45a6ad555"></a><a id="t.4"></a><table class="c32"><tbody><tr class="c9"><td class="c37" colspan="1" rowspan="1"><p class="c16"><span class="c12">Command Byte Value</span></p></td><td class="c17" colspan="1" rowspan="1"><p class="c16"><span class="c12">Operation</span></p></td></tr><tr class="c9"><td class="c37" colspan="1" rowspan="1"><p class="c22"><span class="c4">0</span></p></td><td class="c17" colspan="1" rowspan="1"><p class="c22"><span class="c4">Perform the I2C bus scan, return the scan results in bytes</span></p></td></tr><tr class="c9"><td class="c37" colspan="1" rowspan="1"><p class="c22"><span class="c4">1</span></p></td><td class="c17" colspan="1" rowspan="1"><p class="c22"><span class="c4">I2C read for a given address and register. </span></p></td></tr><tr class="c9"><td class="c37" colspan="1" rowspan="1"><p class="c22"><span class="c4">2</span></p></td><td class="c17" colspan="1" rowspan="1"><p class="c22"><span class="c4">I2C write for a given address and register. </span></p></td></tr></tbody></table><p class="c7 c15"><span class="c4"></span></p><p class="c7"><span class="c38">I2C Scan Command:</span><span class="c4">&nbsp;The scan command queries the I2C bus for devices that are connected to the bus. The scan will return 128 bytes of data, with each byte taking a value of 0 or 1. The position of the byte in the return byte array corresponds to the address of the bus. For example, the first byte is I2C address zero, second byte is I2C address 1 and so on. &nbsp;If a value of 1 is present at byte position 9, this would indicate that an I2C device with address of 0x9 is present on the I2C bus. </span></p><p class="c7"><span class="c38">I2C Read Command:</span><span class="c4">&nbsp;Three parameters are needed for the read command: I2C device address, the register to read from and the number of bytes to read. Some devices have auto increment for the register read operation, in this case, the first register value should be used. </span></p><p class="c7 c15"><span class="c4"></span></p><a id="t.22270d94526b4e91b721d16ad4e7752def8726a1"></a><a id="t.5"></a><table class="c32"><tbody><tr class="c9"><td class="c27" colspan="1" rowspan="1"><p class="c16"><span class="c4">Command byte</span></p></td><td class="c27" colspan="1" rowspan="1"><p class="c16"><span class="c4">Dev Addr Byte</span></p></td><td class="c27" colspan="1" rowspan="1"><p class="c16"><span class="c4">Dev Reg Byte</span></p></td><td class="c27" colspan="1" rowspan="1"><p class="c16"><span class="c4">Length Byte</span></p></td><td class="c27" colspan="1" rowspan="1"><p class="c16"><span class="c4">Data Bytes</span></p></td></tr><tr class="c9"><td class="c27" colspan="1" rowspan="1"><p class="c22"><span class="c4">1</span></p></td><td class="c27" colspan="1" rowspan="1"><p class="c22"><span class="c4">0x09</span></p></td><td class="c27" colspan="1" rowspan="1"><p class="c22"><span class="c4">0x0A</span></p></td><td class="c27" colspan="1" rowspan="1"><p class="c22"><span class="c4">0x03</span></p></td><td class="c27" colspan="1" rowspan="1"><p class="c22"><span class="c4">Not applicable</span></p></td></tr></tbody></table><p class="c7"><span class="c4">As an example the byte array to be sent to Papaya Controller above is a 3 byte read operation at register 0xA from I2C Device address 0x9.</span></p><p class="c7"><span class="c38">I2C Write Command: </span><span class="c4">The write command has the value of 2 with the following byte array structure, with a variable total byte length depending on the amount of the data to be written.</span></p><p class="c7 c15"><span class="c4"></span></p><a id="t.6e48a6eb5aec5d621632d44ad4d13e944bf4570d"></a><a id="t.6"></a><table class="c32"><tbody><tr class="c9"><td class="c27" colspan="1" rowspan="1"><p class="c16"><span class="c4">Command byte</span></p></td><td class="c27" colspan="1" rowspan="1"><p class="c16"><span class="c4">Dev Addr Byte</span></p></td><td class="c27" colspan="1" rowspan="1"><p class="c16"><span class="c4">Dev Reg Byte</span></p></td><td class="c27" colspan="1" rowspan="1"><p class="c16"><span class="c4">Length Byte</span></p></td><td class="c27" colspan="1" rowspan="1"><p class="c16"><span class="c4">Data Bytes</span></p></td></tr><tr class="c9"><td class="c27" colspan="1" rowspan="1"><p class="c22"><span class="c4">1</span></p></td><td class="c27" colspan="1" rowspan="1"><p class="c22"><span class="c4">0x09</span></p></td><td class="c27" colspan="1" rowspan="1"><p class="c22"><span class="c4">0x0C</span></p></td><td class="c27" colspan="1" rowspan="1"><p class="c22"><span class="c4">0x04</span></p></td><td class="c27" colspan="1" rowspan="1"><p class="c22"><span class="c4">0xAABBCCDD</span></p></td></tr></tbody></table><p class="c7"><span>For the example above, a write operation is to be performed to I2C device address of 0x09. The device register to be written is 0x0C with a 4 byte data of 0xAABBCCDD.</span></p><p class="c3"><span class="c4"></span></p><p class="c3"><span class="c4"></span></p></body></html>